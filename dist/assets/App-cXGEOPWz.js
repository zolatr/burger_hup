import{c as z,e as T,h as F,r as x,j as e,B as p,L as K,i as f}from"./index-BcdZmGXw.js";import{D as P,g as _,h as E,i as H,B as u,C as B,k,S as I,j as Y}from"./separator-Dm6u2yZO.js";import{I as y}from"./input-Bce8mMHb.js";import{L as w,C as R,a as G}from"./label-4VZodldv.js";import{U as N,D as $,a as q,b as U,c as X,d as A,e as O,L as W}from"./dropdown-menu-BAyJEv_Y.js";import{C as J,B as Q,S as V,a as Z,b as ee,c as se,d as te,e as ae}from"./sheet-CMbujsvR.js";import{T as S,C as M}from"./truck-BCs5mmAe.js";import{X as L}from"./x-circle-BYCTianO.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=z("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);function re({open:s,onOpenChange:a}){const{user:t}=T(),{setUser:n}=F(),[l,o]=x.useState(!1),[i,h]=x.useState((t==null?void 0:t.name)||""),[b,d]=x.useState((t==null?void 0:t.email)||""),[m,j]=x.useState((t==null?void 0:t.phone)||""),[v,C]=x.useState((t==null?void 0:t.address)||""),r=async c=>{c.preventDefault(),o(!0);try{await new Promise(g=>setTimeout(g,800)),t&&(n({...t,name:i,phone:m,address:v}),f.success("Profil bilgileri güncellendi"),a(!1))}catch{f.error("Bir hata oluştu")}finally{o(!1)}};return e.jsx(P,{open:s,onOpenChange:a,children:e.jsxs(_,{className:"sm:max-w-[425px]",children:[e.jsx(E,{children:e.jsx(H,{children:"Profil Bilgileri"})}),e.jsxs("form",{onSubmit:r,className:"space-y-6 pt-4",children:[e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsxs("div",{className:"relative group cursor-pointer",children:[e.jsx("div",{className:"w-24 h-24 rounded-full bg-secondary flex items-center justify-center border-2 border-border overflow-hidden",children:e.jsx(N,{className:"w-12 h-12 text-muted-foreground"})}),e.jsx("div",{className:"absolute inset-0 bg-black/40 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(J,{className:"w-8 h-8 text-white"})})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm font-medium",children:ne(t==null?void 0:t.role)}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["ID: ",t==null?void 0:t.id]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{htmlFor:"name",children:"Ad Soyad"}),e.jsx(y,{id:"name",value:i,onChange:c=>h(c.target.value),placeholder:"Adınız Soyadınız"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{htmlFor:"email",children:"Email"}),e.jsx(y,{id:"email",type:"email",value:b,disabled:!0,className:"bg-muted"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{htmlFor:"phone",children:"Telefon"}),e.jsx(y,{id:"phone",type:"tel",value:m,onChange:c=>j(c.target.value),placeholder:"+90 ___ ___ ____"})]}),(t==null?void 0:t.role)==="customer"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{htmlFor:"address",children:"Adres"}),e.jsx(y,{id:"address",value:v,onChange:c=>C(c.target.value),placeholder:"Adresiniz"})]})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsxs(p,{type:"submit",disabled:l,children:[l&&e.jsx(K,{className:"mr-2 h-4 w-4 animate-spin"}),"Kaydet"]})})]})]})})}function ne(s){switch(s){case"admin":return"Yönetici";case"chef":return"Mutfak Şefi";case"waiter":return"Garson";case"courier":return"Kurye";default:return"Müşteri"}}function ie({stats:s}){const{user:a,logout:t}=T(),[n,l]=x.useState(!1);return e.jsx("div",{className:"border-b border-neutral-800 bg-[#161616] px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-gradient-to-br from-[#FFB703] to-[#FB8500]",children:e.jsx("span",{className:"text-xl font-bold text-black",children:"K"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-semibold text-white",children:"Kanban Orders"}),e.jsx("p",{className:"text-xs text-neutral-400",children:"Sipariş Yönetim Paneli"})]})]})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 rounded-lg border border-neutral-800 bg-neutral-900/50 px-4 py-2",children:[e.jsx("span",{className:"text-xs text-neutral-400",children:"Günlük:"}),e.jsx(u,{variant:"secondary",className:"bg-[#FFB703] text-black font-semibold",children:s.gunluk})]}),e.jsxs("div",{className:"flex items-center gap-2 rounded-lg border border-neutral-800 bg-neutral-900/50 px-4 py-2",children:[e.jsx("span",{className:"text-xs text-neutral-400",children:"Aktif:"}),e.jsx(u,{variant:"secondary",className:"bg-blue-500 text-white font-semibold",children:s.aktif})]}),e.jsxs("div",{className:"flex items-center gap-2 rounded-lg border border-neutral-800 bg-neutral-900/50 px-4 py-2",children:[e.jsx("span",{className:"text-xs text-neutral-400",children:"Bekleyen:"}),e.jsx(u,{variant:"secondary",className:"bg-red-500 text-white font-semibold",children:s.bekleyen})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-lg border border-neutral-800 bg-neutral-900/50 text-neutral-400 transition-colors hover:bg-neutral-800 hover:text-white",children:e.jsx(Q,{className:"h-5 w-5"})}),e.jsxs($,{children:[e.jsx(q,{asChild:!0,children:e.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-lg border border-neutral-800 bg-neutral-900/50 text-neutral-400 transition-colors hover:bg-neutral-800 hover:text-white",children:e.jsx(N,{className:"h-5 w-5"})})}),e.jsxs(U,{align:"end",className:"w-56 bg-[#161616] border-neutral-800 text-neutral-200",children:[e.jsx(X,{children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium text-white",children:(a==null?void 0:a.name)||"Personel"}),e.jsx("span",{className:"text-xs text-neutral-400",children:a==null?void 0:a.email})]})}),e.jsx(A,{className:"bg-neutral-800"}),e.jsxs(O,{onSelect:()=>l(!0),className:"focus:bg-neutral-800 focus:text-white cursor-pointer",children:[e.jsx(N,{className:"mr-2 h-4 w-4"}),"Profil"]}),e.jsx(A,{className:"bg-neutral-800"}),e.jsxs(O,{onClick:t,className:"text-red-500 focus:bg-neutral-800 focus:text-red-400 cursor-pointer",children:[e.jsx(W,{className:"mr-2 h-4 w-4"}),"Çıkış Yap"]})]})]}),e.jsx(re,{open:n,onOpenChange:l})]})]})})}function ce({order:s,onClick:a}){const t=n=>new Date(n).toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"});return e.jsx(R,{className:"cursor-pointer border-neutral-800 bg-neutral-900/50 p-4 transition-all hover:border-neutral-700 hover:bg-neutral-900 hover:shadow-lg",onClick:a,children:e.jsx(G,{className:"p-0",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-neutral-800",children:e.jsx(N,{className:"h-4 w-4 text-neutral-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-white",children:s.customerName||"Misafir"}),e.jsxs("p",{className:"text-xs text-neutral-500",children:["#",s.id]})]})]}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-neutral-400",children:[e.jsx(B,{className:"h-3 w-3"}),t(s.createdAt)]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-neutral-400",children:[e.jsx(k,{className:"h-3 w-3"}),e.jsx("span",{children:"Ürünler:"})]}),e.jsxs("div",{className:"space-y-1",children:[s.items.slice(0,2).map((n,l)=>e.jsxs("div",{className:"rounded border border-neutral-800 bg-neutral-950 px-2 py-1 text-xs text-neutral-300",children:[n.quantity,"x ",n.name]},l)),s.items.length>2&&e.jsxs("div",{className:"text-xs text-neutral-500",children:["+",s.items.length-2," daha..."]})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-neutral-800",children:[e.jsx("div",{children:s.courier?e.jsx(u,{variant:"outline",className:"border-green-900 bg-green-950/30 text-green-400",children:s.courier}):e.jsx(u,{variant:"outline",className:"border-neutral-800 text-neutral-500",children:"Kurye Atanmadı"})}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"text-lg font-bold text-[#FFB703]",children:[s.total.toFixed(2),"₺"]})})]})]})})})}function de({title:s,orders:a,color:t,icon:n,onOrderClick:l}){return e.jsxs("div",{className:"flex flex-col rounded-xl border border-neutral-800 bg-neutral-950/30 p-4",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`flex h-8 w-8 items-center justify-center rounded-lg ${t}`,children:n}),e.jsx("h3",{className:"font-semibold text-white",children:s})]}),e.jsx(u,{variant:"secondary",className:"bg-neutral-800 text-neutral-300",children:a.length})]}),e.jsx("div",{className:"space-y-3 overflow-y-auto",style:{maxHeight:"calc(100vh - 220px)"},children:a.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx("div",{className:"mb-2 text-neutral-600",children:n}),e.jsx("p",{className:"text-sm text-neutral-500",children:"Sipariş yok"})]}):a.map(o=>e.jsx(ce,{order:o,onClick:()=>l(o)},o.id))})]})}const D={pending:{label:"Bekliyor",color:"bg-red-500",icon:e.jsx(B,{className:"h-4 w-4"})},preparing:{label:"Hazırlanıyor",color:"bg-yellow-500",icon:e.jsx(k,{className:"h-4 w-4"})},ready:{label:"Hazır",color:"bg-blue-500",icon:e.jsx(S,{className:"h-4 w-4"})},delivered:{label:"Teslim Edildi",color:"bg-green-500",icon:e.jsx(M,{className:"h-4 w-4"})},cancelled:{label:"İptal",color:"bg-gray-500",icon:e.jsx(L,{className:"h-4 w-4"})}},oe=["Ali Y.","Mehmet K.","Ayşe S.","Fatma D."];function xe({order:s,open:a,onClose:t,onStatusChange:n,onCourierAssign:l}){if(!s)return null;const i=(d=>{const m=["pending","preparing","ready","delivered"],j=m.indexOf(d);return j<m.length-1&&j!==-1?m[j+1]:null})(s.status),h=D[s.status]||D.pending,b=d=>new Date(d).toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"});return e.jsx(V,{open:a,onOpenChange:t,children:e.jsxs(Z,{className:"w-full sm:max-w-lg bg-neutral-950 border-neutral-800 overflow-y-auto",children:[e.jsxs(ee,{children:[e.jsx(se,{className:"text-xl font-bold text-white",children:"Sipariş Detayları"}),e.jsxs(te,{className:"text-neutral-400",children:["Sipariş #",s.id]})]}),e.jsxs("div",{className:"mt-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(u,{className:`${h.color} text-white font-semibold border-none px-3 py-1.5`,children:[h.icon,h.label]}),e.jsx("span",{className:"text-xs text-neutral-500",children:b(s.createdAt)})]}),e.jsx(I,{className:"bg-neutral-800"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-sm font-semibold text-neutral-400",children:"Müşteri Bilgileri"}),e.jsx("div",{className:"space-y-2 rounded-lg border border-neutral-800 bg-neutral-900/30 p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{className:"h-4 w-4 text-neutral-500"}),e.jsx("span",{className:"text-sm font-medium text-white",children:s.customerName||"Misafir"})]})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-sm font-semibold text-neutral-400",children:"Sipariş Detayları"}),e.jsx("div",{className:"space-y-2",children:s.items.map((d,m)=>e.jsx("div",{className:"flex items-center justify-between rounded-lg border border-neutral-800 bg-neutral-900/30 p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{className:"h-4 w-4 text-neutral-500"}),e.jsxs("span",{className:"text-sm text-white",children:[d.quantity,"x ",d.name]})]})},m))}),e.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-[#FFB703] bg-[#FFB703]/10 p-4",children:[e.jsx("span",{className:"text-sm font-semibold text-white",children:"Toplam Tutar"}),e.jsxs("span",{className:"text-xl font-bold text-[#FFB703]",children:[s.total.toFixed(2),"₺"]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-sm font-semibold text-neutral-400",children:"Kurye Bilgisi"}),e.jsx("div",{className:"space-y-2",children:s.courier?e.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-green-900 bg-green-950/20 p-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{className:"h-4 w-4 text-green-400"}),e.jsx("span",{className:"text-sm font-medium text-green-400",children:s.courier})]}),e.jsx(u,{variant:"outline",className:"border-green-900 bg-green-950/30 text-green-400",children:"Atandı"})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"rounded-lg border border-neutral-800 bg-neutral-900/30 p-3",children:e.jsx("span",{className:"text-sm text-neutral-400",children:"Kurye henüz atanmadı"})}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:oe.map(d=>e.jsxs(p,{variant:"outline",size:"sm",className:"border-neutral-800 bg-neutral-900/50 hover:bg-neutral-800 hover:text-white",onClick:()=>l(s.id,d),children:[e.jsx(S,{className:"mr-2 h-3 w-3"}),d]},d))})]})})]})]}),e.jsxs(ae,{className:"mt-6 flex-col gap-2 sm:flex-col",children:[i&&e.jsxs(p,{className:"w-full bg-[#FFB703] text-black font-semibold hover:bg-[#FB8500]",onClick:()=>{n(s.id,i),t()},children:[D[i].label," Olarak İşaretle",e.jsx(le,{className:"ml-2 h-4 w-4"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(p,{variant:"outline",className:"border-neutral-800 bg-neutral-900/50 hover:bg-neutral-800",onClick:t,children:"Kapat"}),e.jsxs(p,{variant:"destructive",className:"bg-red-950 border border-red-900 text-red-400 hover:bg-red-900 hover:text-white",children:[e.jsx(L,{className:"mr-2 h-4 w-4"}),"İptal Et"]})]})]})]})})}const me=[{title:"Bekliyor",status:"pending",color:"bg-red-500",icon:e.jsx(B,{className:"h-4 w-4 text-white"})},{title:"Hazırlanıyor",status:"preparing",color:"bg-yellow-500",icon:e.jsx(k,{className:"h-4 w-4 text-white"})},{title:"Hazır / Yolda",status:"ready",color:"bg-blue-500",icon:e.jsx(S,{className:"h-4 w-4 text-white"})},{title:"Teslim Edildi",status:"delivered",color:"bg-green-500",icon:e.jsx(M,{className:"h-4 w-4 text-white"})}];function he(){const{orders:s,updateOrderStatus:a,updateOrder:t}=F(),[n,l]=x.useState(null),[o,i]=x.useState(!1),[h,b]=x.useState(s.length),[d]=x.useState(new Audio("https://assets.mixkit.co/active_storage/sfx/2869/2869-preview.mp3"));x.useEffect(()=>{s.length>h&&(d.play().catch(r=>console.error("Audio play failed",r)),f.info("Yeni Sipariş Geldi!",{description:"Mutfakta yeni bir sipariş var.",duration:5e3})),b(s.length)},[s.length,h,d]);const m=r=>{l(r),i(!0)},j=(r,c)=>{a(r,c),f.success("Sipariş Durumu Güncellendi",{description:`Sipariş #${r} durumu değiştirildi.`})},v=(r,c)=>{t(r,{courier:c}),l(g=>g&&g.id===r?{...g,courier:c}:g),f.success("Kurye Atandı",{description:`${c} siparişe atandı.`})},C=()=>{i(!1),setTimeout(()=>l(null),300)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex-1 overflow-hidden p-6",children:e.jsx("div",{className:"grid h-full grid-cols-4 gap-4",children:me.map(r=>e.jsx(de,{title:r.title,status:r.status,orders:s.filter(c=>c.status===r.status),color:r.color,icon:r.icon,onOrderClick:m},r.status))})}),e.jsx(p,{size:"lg",className:"fixed bottom-8 right-8 h-14 w-14 rounded-full bg-[#FFB703] text-black shadow-2xl hover:bg-[#FB8500] hover:scale-110 transition-transform p-0",onClick:()=>f.info("Simülasyon şu an için mağaza tarafından otomatik yapılıyor."),children:e.jsx(Y,{className:"h-6 w-6"})}),e.jsx(xe,{order:n,open:o,onClose:C,onStatusChange:j,onCourierAssign:v})]})}function ye(){const{orders:s}=F(),a=new Date().toISOString().split("T")[0],t=s.filter(i=>i.createdAt.startsWith(a)).length,n=s.filter(i=>["pending","preparing","ready"].includes(i.status)).length,l=s.filter(i=>i.status==="pending").length,o={gunluk:t,aktif:n,bekleyen:l};return e.jsxs("div",{className:"dark h-screen flex flex-col bg-[#1D1D1D] overflow-hidden",children:[e.jsx(ie,{stats:o}),e.jsx(he,{})]})}export{ye as default};
